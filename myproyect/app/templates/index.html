{% include 'defaults/head.html' %}
<body>
    <div id="saludo"></div>
    {% include 'defaults/header.html' %}    

    <section class="news-main">
        <div class="container">
            
            {% for obra in obras %}
            <article>
                <div class="img">
                    <img src="{{ url_for('static', filename='img/' + obra['imagen']) }}" alt="{{ obra['titulo'] }}">
                </div>
                
                <h2>{{ obra['titulo'] }}</h2>
                <p><strong>{{ obra['autor'] }}{% if obra['director'] %} | Dir: {{ obra['director'] }}{% endif %}</strong></p>
                <p>{{ obra['descripcion'][:200] }}...</p>
                
                <div class="obra-info mb-3">
                    {% if obra['teatro'] %}
                    <p class="mb-1"><i class="fas fa-map-marker-alt"></i> <strong>{{ obra['teatro'] }}</strong></p>
                    {% endif %}
                    <p class="mb-2" style="font-size: 1.3rem; font-weight: bold; color: var(--color-primary);">
                        <i class="fas fa-ticket-alt"></i> ${{ "{:,.0f}".format(obra['precio']) }}
                    </p>
                </div>
                
                {% if current_user.is_authenticated %}
                    <a href="/comprar/{{ obra['id'] }}" class="btn btn-primary">
                        <i class="fas fa-shopping-cart me-2"></i>Comprar Entradas
                    </a>
                {% else %}
                    <a href="/login?next=/comprar/{{ obra['id'] }}" class="btn btn-secondary">
                        <i class="fas fa-ticket-alt me-2"></i>Comprar Entradas
                    </a>
                {% endif %}
            </article>
            {% endfor %}
            
        </div>
    </section>
    {% include 'defaults/footer.html' %}  

<!-- Interpolacion barra de busqueda  -->
<script>{{url_for('static', filename='js/busquedas.js')}}</script>

<script>
    function mostrarSaludo() {
      const horaActual = new Date().getHours();
      const saludoDiv = document.getElementById('saludo');
  
      if (horaActual >= 6 && horaActual < 12) {
        saludoDiv.textContent = '¡Buenos días!';
      } else if (horaActual >= 12 && horaActual < 18) {
        saludoDiv.textContent = '¡Buenas tardes!';
      } else {
        saludoDiv.textContent = '¡Buenas noches!';
      }
    }
  
    // Llama a la función al cargar la página
    mostrarSaludo();
  </script>
    
</body>
</html>